<header class="titulo">
    <h1>Agregar nuevo empleado</h1>
</header>

<div class="cliente-formulario">
    <form #clienteForm="ngForm" (ngSubmit)="agregarEmpleado()" novalidate>

        <label>Nombre:</label>
        <input type="text" [(ngModel)]="nombre" name="nombre" required pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" #nombreCtrl="ngModel">
        <div *ngIf="nombreCtrl.invalid && nombreCtrl.touched" class="error">Nombre requerido y solo letras</div>

        <label>Apellido:</label>
        <input type="text" [(ngModel)]="apellido" name="apellido" required pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+" #apellidoCtrl="ngModel">
        <div *ngIf="apellidoCtrl.invalid && apellidoCtrl.touched" class="error">Apellido requerido y solo letras</div>

        <label>Tipo de Documento:</label>
        <select [(ngModel)]="tipoDocumento" name="tipoDocumento" required #tipoDocumentoCtrl="ngModel">
            <option value="" disabled selected>Seleccione tipo de documento</option>
            <option *ngFor="let tipo of listaTipoDocumento" [value]="tipo.nombre">{{ tipo.nombre }}</option>
        </select>
        <div *ngIf="tipoDocumentoCtrl.errors?.['required'] && tipoDocumentoCtrl.touched" class="error">
            La seleccion del tipo de documento es requerida
        </div>

        <label>Cédula:</label>
        <input type="text" [(ngModel)]="cedula" name="cedula" required pattern="^[0-9]{6,20}$" #cedulaCtrl="ngModel">
        <div *ngIf="cedulaCtrl.invalid && cedulaCtrl.touched" class="error">Cédula inválida (mín. 6 dígitos)</div>

        <label>Teléfono:</label>
        <input type="text" [(ngModel)]="telefono" name="telefono" required pattern="^\+?[0-9]{7,20}$" #telefonoCtrl="ngModel">
        <div *ngIf="telefonoCtrl.invalid && telefonoCtrl.touched" class="error">Teléfono inválido (7-20 caracteres, admite +)</div>

        <label>Correo electrónico:</label>
        <input type="email" [(ngModel)]="correo" name="correo" required pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$"  #correoCtrl="ngModel">
        <div *ngIf="correoCtrl.errors?.['required'] && correoCtrl.touched" class="error">Correo requerido</div>
        <div *ngIf="correoCtrl.errors?.['email'] && correoCtrl.touched" class="error">Correo no válido</div>
        <div *ngIf="correoCtrl.invalid && correoCtrl.touched" class="error">Correo no válido </div>


        <label>Dirección:</label>
        <input type="text" [(ngModel)]="direccionResidencia" name="direccion" required #direccionCtrl="ngModel">
        <div *ngIf="direccionCtrl.invalid && direccionCtrl.touched" class="error">Dirección requerida</div>

        <label>Departamento:</label>
        <select [(ngModel)]="departamento" name="departamento" required #departamentoCtrl="ngModel" (change)="onDepartamentoChange()">
            <option *ngFor="let dpto of listaDepartamentos" [value]="dpto.id">{{ dpto.nombre }}</option>
        </select>
        <div *ngIf="departamentoCtrl.errors?.['required'] && departamentoCtrl.touched" class="error">
            Departamento es requerido
        </div>

        <label>Ciudad:</label>
        <select [(ngModel)]="ciudad" name="ciudad" required #ciudadCtrl="ngModel">
            <option *ngFor="let ciudad of ciudadesFiltradas" [value]="ciudad.id">{{ ciudad.nombre }}</option>
        </select>
        <div *ngIf="ciudadCtrl.errors?.['required'] && ciudadCtrl.touched" class="error">
            Ciudad es requerida
        </div>

        <label>Empresa:</label>
        <select [(ngModel)]="empresa" name="empresa" required #empresaCtrl="ngModel">
            <option *ngFor="let e of listaEmpresa" [value]="e.id">{{ e.nombre }}</option>
        </select>
        <div *ngIf="empresaCtrl.errors?.['required'] && empresaCtrl.touched" class="error">
            Empresa es requerida
        </div>

        <button type="submit" [disabled]="clienteForm.invalid" class="enviar">Agregar</button>
    </form>
</div>

